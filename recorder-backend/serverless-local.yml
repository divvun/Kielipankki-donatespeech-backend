service: recorder-backend

provider:
  name: aws
  runtime: python3.8
  memorySize: 1024
  timeout: 20
  stage: ${opt:stage, 'dev'}
  region: eu-west-1
  environment:
    CONTENT_BUCKET_NAME: recorder-test
    YLE_CLIENT_ID: XXX
    YLE_CLIENT_KEY: XXX
    YLE_DECRYPT: XXX

plugins:
  - serverless-python-requirements

functions:
  initUpload:
    handler: handler.init_upload

  deleteClientData:
    handler: handler.delete_stored_client_data

  loadConfiguration:
    handler: configuration.load_configuration

  loadAllConfigurations:
    handler: configuration.load_all_configurations

  loadTheme:
    handler: theme.load_theme

  loadAllThemes:
    handler: theme.load_all_themes

  audioFileChecker:
    handler: checker.check_audio_file

custom:
  pythonRequirements:
    dockerizePip: false
